<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="toolbox.png" type="image/x-icon">
    <link rel="stylesheet" href="main.css">
    <title>テキストエリア</title>
</head>
<body>
    <header>
        <button id="header_reload">↻</button>
        <span>テキストエリア</span>
        <button id="header_btn">≡</button>
        <div id="header_link"></div>
    </header>
    <main style="padding:6px 0 0 1px">
        <textarea name="" id="in_a" cols="29" rows="21" placeholder="" style="height:calc(100vh - 45px)"></textarea>
    </main>
    <script src="main.js"></script>
    <script>
        (function(){
            function main(){
                function OnKey( e, obj ){
                    switch(e.key){
                        case "Tab":
                            e.preventDefault();
                            let cursorPosition = obj.selectionStart;
                            let cursorLeft     = obj.value.substr( 0, cursorPosition );
                            let cursorRight    = obj.value.substr( cursorPosition, obj.value.length );
                            obj.value = cursorLeft+"\t"+cursorRight;
                            obj.selectionEnd = cursorPosition+1;
                            break;
                        default:
                            break;
                    }
                }
                in_a.addEventListener("keydown", (e)=>{
                    OnKey( e, in_a );
                });
            }
            main();
        })();
    </script>
</body>
</html>